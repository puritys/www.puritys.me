<!DOCTYPE html>
<html>
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M3BFP5');</script>
    <!-- End Google Tag Manager -->

    <link href="../../templates/static/css/files%3Fdefault.less&amp;other.less&amp;ezHTML.less&amp;%3Fv=20180416-2.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js?v=20180416-2"></script>
    <script src="../../templates/static/js/files%3FlightHttp-simple-min.js&amp;default.js&amp;facebookAPI.js&amp;form_check.js&amp;util.js&amp;listAutoLoadMore.js&amp;%3Fv=20180416-2"></script>
    <script src="https://www.puritys.me/templates/static/js/files?none" type="text/javascript" charset="utf-8"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="content-language" content="zh-CN" />
    <meta name="author" content="Puritys" />
    <title>在 Mac 中使用 Docker</title>
    <meta name="keywords" content="Docker, Mac" />
    <meta name="description" content="Docker 是什麼呢，他是一個虛擬機器的軟體，可以在一個虛擬的環境下執行 Application，例如我可以在 Linux 系統中，透過 Docker 虛擬出好幾台的 Linux 系統，那為什麼我要這麼多台 Linux 系統，假設我寫一個 C/C++ 的程式碼，但是我必須在各種不同的 OS 上做測試，例如 Ubuntu, CentOS, debain 等等，那麼我不用同時安裝" />
    <meta property="fb:app_id" content="160015347378316" />
    <meta property="fb:admins" content="1140660203"/>
    

    <link rel="shortcut icon" href="https://www.puritys.me/templates/static/images/favicon_puritys.ico" /> 
    

    <link rel="canonical" href="article-309-在-Mac-中使用-Docker.html"/>
    

    <link rel="alternate" hreflang="zh-CN" href="article-309-在-Mac-中使用-Docker.html">
        <link rel="alternate" hreflang="zh-TW" href="../../docs-blog/article-309.html">
        


    <link rel="amphtml" href="../docs-blog-amp/article-309-在-Mac-中使用-Docker.html"/>
    

    <link rel="dns-prefetch" href="apis.google.com.html">
        <link rel="dns-prefetch" href="ajax.googleapis.com.html">
        <link rel="dns-prefetch" href="connect.facebook.net.html">
        <link rel="dns-prefetch" href="www.google-analytics.com.html">
        <link rel="dns-prefetch" href="www.puritys.me.html">
        

<!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    
<script type="application/ld+json">
{
   "@context": "http://schema.org",
   "@type": "WebSite",
   "url": "//www.puritys.me",
   "potentialAction": {
     "@type": "SearchAction",
     "target": "https://www.puritys.me/search?searchText={search_term_string}",
     "query-input": "required name=search_term_string"
   }
}
    </script>
    


<script type="application/ld+json">
{ "@context" : "http://schema.org",
  "@type" : "Organization",
  "name" : "",
  "url" : "//www.puritys.me",
  "sameAs" : [ 
    
    "https://github.com/puritys",
    
    "https://www.facebook.com/Puritys.Chen.5815"
    
  ] 
}
    </script>







</head>
<body>

            
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3BFP5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


            
<div class="settings">
    
        <script>var WRT="https://www.puritys.me/";</script>
    
</div>


            
<div class="header">
    <div class="top-header">
        <div class="main">
        <a class="logo" href="https://www.puritys.me/"><img src="https://www.puritys.me/templates/static/images/logo_puritys.png" alt="Puritys Blog" title="Puritys Blog"></a>
        <a class="navbar-btn" href="article-309-在-Mac-中使用-Docker.html#"><span class="icon"></span></a>
        </div>
        <ul class="navbar">
             
            <li >
                <a href="https://www.puritys.me/news" data-ga='{"action":"menu_click","label":"\u7db2\u8def\u65b0\u805e"}'>網路新聞</a>
            </li>
             
            <li >
                <a href="https://www.puritys.me/life" data-ga='{"action":"menu_click","label":"\u751f\u6d3b\u65c5\u904a"}'>生活旅遊</a>
            </li>
             
            <li >
                <a href="https://www.puritys.me/WEB_SECURITY" data-ga='{"action":"menu_click","label":"\u7db2\u8def\u5b89\u5168"}'>網路安全</a>
            </li>
             
            <li class="active">
                <a href="https://www.puritys.me/docs-cate" data-ga='{"action":"menu_click","label":"\u7a0b\u5f0f\u96dc\u8a18"}'>程式雜記</a>
            </li>
            
        </ul>
        <form action="https://www.puritys.me/search" class="navbar-form">
            <input type="text" name="searchText" placeholder="Input your keyword" value="">
            <i class="glyphicon glyphicon-search"></i>
        </form>
    </div>
</div>


        

        
<div class="body-content">
    
            
    <div class="main">
        
                
<ul class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"> 
    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a href="https://www.puritys.me/" itemscope itemtype="http://schema.org/Thing" itemprop="item">
            <em><span itemprop="name">Home</span></em>
        </a>
        <meta itemprop="position" content="1" />
    </li>
    
        
            <li  itemprop="itemListElement" itemscope  itemtype="http://schema.org/ListItem">
                <a href="https://www.puritys.me/docs-cate/software" itemscope itemtype="http://schema.org/Thing" itemprop="item">
                    <em><span itemprop="name">實用軟體</span></em>
                </a>
                <meta itemprop="position" content="2" />
            </li>
        
    
        
            <li class="active">
                <a href="../../docs-blog/article-309.html">
                    <em><span>在 Mac 中使用 Docker</span></em>
                </a>
            </li>
        
    
</ul>

        
                


<script type="application/ld+json">
    {"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.puritys.me\/zh_cn\/docs-blog\/article-309-\u5728-Mac-\u4e2d\u4f7f\u7528-Docker.html"},"headline":"\u5728 Mac \u4e2d\u4f7f\u7528 Docker","image":"https:\/\/www.puritys.me\/filemanage\/blog_files\/file_216.png","datePublished":"2015-05-02T00:35:42+08:00","dateModified":"2018-03-10T15:18:07+08:00","author":{"@type":"Person","name":"puritys"},"publisher":{"@type":"Organization","name":"www.puritys.me","logo":{"@type":"ImageObject","url":"https:\/\/www.puritys.me\/templates\/static\/images\/favicon_puritys.ico"}},"description":"Docker \u662f\u4ec0\u9ebc\u5462\uff0c\u4ed6\u662f\u4e00\u500b\u865b\u64ec\u6a5f\u5668\u7684\u8edf\u9ad4\uff0c\u53ef\u4ee5\u5728\u4e00\u500b\u865b\u64ec\u7684\u74b0\u5883\u4e0b\u57f7\u884c Application\uff0c\u4f8b\u5982\u6211\u53ef\u4ee5\u5728 Linux \u7cfb\u7d71\u4e2d\uff0c\u900f\u904e Docker \u865b\u64ec\u51fa\u597d\u5e7e\u53f0\u7684 Linux \u7cfb\u7d71\uff0c\u90a3\u70ba\u4ec0\u9ebc\u6211\u8981"}
</script>


<div class="entry">
   <div class="entry-header">
        
        <div class="date">
            <div class="year">2015</div>
            <div class="month">May</div>
            <div class="day">02</div>
        </div>

        
        <div class="title">
            <h1><a href="article-309-在-Mac-中使用-Docker.html"><span>在 Mac 中使用 Docker</span></a></h1>
            <div class="sub">
                <div class="caption">Tags:</div>
                <ul class="labels">
                    
                    <li class="label">
                        <a class="label-item" target="_blank"
                             href="https://www.puritys.me/docs-cate?tag=Docker">Docker</a>
                    </li>
                    
                    <li class="label">
                        <a class="label-item" target="_blank"
                             href="https://www.puritys.me/docs-cate?tag=Mac">Mac</a>
                    </li>
                    
                </ul>
            </div>
            
            <div class="lang-wrap">
            
                <a href="../../docs-blog/article-309.html" rel="alternate" hreflang="zh-TW">繁中版</a>
            
            </div>
            
        </div>
    </div>

    
    <div class="entry-body">
        <div class="ezHTML-content"><p>Docker 是什么呢，他是一个虚拟机器的软体，可以在一个虚拟的环境下执行 Application，例如我可以在 Linux 系统中，透过 Docker 虚拟出好几台的 Linux 系统，那为什么我要这么多台 Linux 系统，假设我写一个 C/C++ 的程式码，但是我必须在各种不同的 OS 上做测试，例如 Ubuntu, CentOS, debain 等等，那么我不用同时安装这么多系统，只要透过 Docker 就能轻松的摸拟各种环境。</p><p>那 Docker 跟 VirtualBox (VMware) 有什么不同呢? VirtualBox 虚拟机器会建立一个独立的 CPU, Memory 与 Network 网路 ，就像是摸拟出一台跟真的一样的机器，因为摸拟的部分很大，所以VirtualBox 的执行效能会比较差，而且 CPU 与 Memory 的用量很多； 而 Docker 只是单纯的使用 LXC 来模拟出 Linux File System ， 当你在 Docker 执行一个程式时，会直接使用主机的 CPU, Memory 来运作，所以我们也可以把 Docker 称为一个 VE System : Virtualization Environment</p><h2>如何在 Mac 安装 Docker</h2><p>因为 Docker 只能在 Linux kernel 下执行，所以我们不能直接将 Docker 安装在 Mac OS 上。</p><p>Docker 在 Mac 环境上不断的更新，目前已经出了三个版本，分别是 boot2docker,  docker-machine, docker xhyve ，其中 boot2docker, docker-machine 都会用到 virtual box ，主要是为了在 Mac 上安装一个 Linux 环境，刚刚有说过， Docker 目前只能在 Linux 上运作，所以最简单的解决方式，就是装一个 Linux OS  到 Mac 里，当然这样 Performance 一定不会太好，不过对於开发&测试&学习环境来说，这仍然是一个不错的选择。</p><p>Docker xhyve 是目前最新的 Docker on Mac 的工具，他可以在 Mac 摸拟 Linux kernel ，所以省去了安装 Virtual box 的动作 (xhyve 安装方式可以看这里 <a href="https://github.com/zchee/docker-machine-driver-xhyve"  target="_blank">https://github.com/zchee/docker-machine-driver-xhyve</a> )。</p><ul class="list">  <li>Docker for Mac 官方教学 <a href="https://docs.docker.com/engine/installation/mac/"  target="_blank">https://docs.docker.com/engine/installation/mac/</a></li></ul><p>接下来我会用第二个版本 "docker-machine" 来做示范。</p><h3>下载 Docker</h3><p>在官方的教学网址中，有两个安装 Docker 的方式 ，一个是新的 Docker for Mac : xhyve ， 另一个是 Docker toolbox ，这里我选择的是 docker toolbox ，并下载的 Docker 版本是 1.10.3 ，下载网址如下。</p><ul class="list">  <li><a href="https://www.docker.com/products/docker-toolbox"  target="_blank">https://www.docker.com/products/docker-toolbox</a></li></ul><h2>安装并建立 Docker OS</h2><p>下载完成后，点击两下档案就可以安装了，注意它可能会要求你先装好 virtualbox ，这个是免费软体，Google 搜寻就可以找到了。</p><img src="https://www.puritys.me/filemanage/blog_files/file_216.png"   /><br /><br /><p>安装完成后，Docker toolbox 提供了一个快速建立 Linux 含 Docker 的方式，这里我是选择左边的选项 Docker Quickstart Terminal ，它会帮我们建立一个 Linux ，并在上面安装 Docker ，很容易吧~。</p><img src="https://www.puritys.me/filemanage/blog_files/file_215.png"   /><div class="codeBlock term"><span class="title"> init</span><pre class="prettyprint lang-term linenums" ><ol class="linenums"><li class="L0"><span class="typ">Creating</span><span class="pln"> CA</span><span class="pun">:</span><span class="pln"> </span><span class="str">/Users/</span><span class="pln">puritys</span><span class="pun">/.</span><span class="pln">docker</span><span class="pun">/</span><span class="pln">machine</span><span class="pun">/</span><span class="pln">certs</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">.</span><span class="pln">pem</span></li><li class="L1"><span class="typ">Creating</span><span class="pln"> client certificate</span><span class="pun">:</span><span class="pln"> </span><span class="str">/Users/</span><span class="pln">puritys</span><span class="pun">/.</span><span class="pln">docker</span><span class="pun">/</span><span class="pln">machine</span><span class="pun">/</span><span class="pln">certs</span><span class="pun">/</span><span class="pln">cert</span><span class="pun">.</span><span class="pln">pem</span></li><li class="L2"><span class="typ">Running</span><span class="pln"> pre</span><span class="pun">-</span><span class="pln">create checks</span><span class="pun">...</span></li><li class="L3"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Default</span><span class="pln"> </span><span class="typ">Boot2Docker</span><span class="pln"> ISO </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">date</span><span class="pun">,</span><span class="pln"> downloading the latest release</span><span class="pun">...</span></li><li class="L4"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Latest</span><span class="pln"> release </span><span class="kwd">for</span><span class="pln"> github</span><span class="pun">.</span><span class="pln">com</span><span class="pun">/</span><span class="pln">boot2docker</span><span class="pun">/</span><span class="pln">boot2docker </span><span class="kwd">is</span><span class="pln"> v1</span><span class="pun">.</span><span class="lit">11.2</span></li><li class="L5"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Downloading</span><span class="pln"> </span><span class="pun">/</span><span class="typ">Users</span><span class="pun">/</span><span class="pln">puritys</span><span class="pun">/.</span><span class="pln">docker</span><span class="pun">/</span><span class="pln">machine</span><span class="pun">/</span><span class="pln">cache</span><span class="pun">/</span><span class="pln">boot2docker</span><span class="pun">.</span><span class="pln">iso </span><span class="kwd">from</span><span class="pln"> https</span><span class="pun">:</span><span class="com">//github.com/boot2docker/boot2docker/releases/download/v1.11.2/boot2docker.iso...(default) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%</span></li><li class="L6"><span class="typ">Creating</span><span class="pln"> machine</span><span class="pun">...</span></li><li class="L7"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Copying</span><span class="pln"> </span><span class="pun">/</span><span class="typ">Users</span><span class="pun">/</span><span class="pln">puritys</span><span class="pun">/.</span><span class="pln">docker</span><span class="pun">/</span><span class="pln">machine</span><span class="pun">/</span><span class="pln">cache</span><span class="pun">/</span><span class="pln">boot2docker</span><span class="pun">.</span><span class="pln">iso to </span><span class="pun">/</span><span class="typ">Users</span><span class="pun">/</span><span class="pln">puritys</span><span class="pun">/.</span><span class="pln">docker</span><span class="pun">/</span><span class="pln">machine</span><span class="pun">/</span><span class="pln">machines</span><span class="pun">/</span><span class="kwd">default</span><span class="pun">/</span><span class="pln">boot2docker</span><span class="pun">.</span><span class="pln">iso</span><span class="pun">...</span></li><li class="L8"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Creating</span><span class="pln"> </span><span class="typ">VirtualBox</span><span class="pln"> VM</span><span class="pun">...</span></li><li class="L9"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Creating</span><span class="pln"> SSH key</span><span class="pun">...</span></li><li class="L0"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Starting</span><span class="pln"> the VM</span><span class="pun">...</span></li><li class="L1"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Check</span><span class="pln"> network to re</span><span class="pun">-</span><span class="pln">create </span><span class="kwd">if</span><span class="pln"> needed</span><span class="pun">...</span></li><li class="L2"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Found</span><span class="pln"> a </span><span class="kwd">new</span><span class="pln"> host</span><span class="pun">-</span><span class="pln">only adapter</span><span class="pun">:</span><span class="pln"> </span><span class="str">"vboxnet1"</span></li><li class="L3"><span class="pun">(</span><span class="kwd">default</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Waiting</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> an IP</span><span class="pun">...</span></li><li class="L4"><span class="typ">Waiting</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> machine to be running</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> may take a few minutes</span><span class="pun">...</span></li><li class="L5"><span class="typ">Detecting</span><span class="pln"> operating system of created instance</span><span class="pun">...</span></li><li class="L6"><span class="typ">Waiting</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> SSH to be available</span><span class="pun">...</span></li><li class="L7"><span class="typ">Detecting</span><span class="pln"> the provisioner</span><span class="pun">...</span></li><li class="L8"><span class="typ">Provisioning</span><span class="pln"> </span><span class="kwd">with</span><span class="pln"> boot2docker</span><span class="pun">...</span></li><li class="L9"><span class="typ">Copying</span><span class="pln"> certs to the </span><span class="kwd">local</span><span class="pln"> machine directory</span><span class="pun">...</span></li><li class="L0"><span class="typ">Copying</span><span class="pln"> certs to the remote machine</span><span class="pun">...</span></li><li class="L1"><span class="typ">Setting</span><span class="pln"> </span><span class="typ">Docker</span><span class="pln"> configuration on the remote daemon</span><span class="pun">...</span></li><li class="L2"><span class="typ">Checking</span><span class="pln"> connection to </span><span class="typ">Docker</span><span class="pun">...</span></li><li class="L3"><span class="typ">Docker</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> up </span><span class="kwd">and</span><span class="pln"> running</span><span class="pun">!</span></li><li class="L4"><span class="typ">To</span><span class="pln"> see how to connect your </span><span class="typ">Docker</span><span class="pln"> </span><span class="typ">Client</span><span class="pln"> to the </span><span class="typ">Docker</span><span class="pln"> </span><span class="typ">Engine</span><span class="pln"> running on </span><span class="kwd">this</span><span class="pln"> </span><span class="kwd">virtual</span><span class="pln"> machine</span><span class="pun">,</span><span class="pln"> run</span><span class="pun">:</span><span class="pln"> </span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">docker</span><span class="pun">-</span><span class="pln">machine env </span><span class="kwd">default</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">                        </span><span class="pun">==</span><span class="pln">         </span><span class="pun">.</span></li><li class="L7"><span class="pln">                  </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln">        </span><span class="pun">==</span></li><li class="L8"><span class="pln">               </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">==</span><span class="pln">    </span><span class="pun">===</span></li><li class="L9"><span class="pln">           </span><span class="str">/"""""""""""""""""&#92;___/</span><span class="pln"> </span><span class="pun">===</span></li><li class="L0"><span class="pln">      </span><span class="pun">~~~</span><span class="pln"> </span><span class="pun">{~~</span><span class="pln"> </span><span class="pun">~~~~</span><span class="pln"> </span><span class="pun">~~~</span><span class="pln"> </span><span class="pun">~~~~</span><span class="pln"> </span><span class="pun">~~~</span><span class="pln"> </span><span class="pun">~</span><span class="pln"> </span><span class="pun">/</span><span class="pln">  </span><span class="pun">===-</span><span class="pln"> </span><span class="pun">~~~</span></li><li class="L1"><span class="pln">           &#92;______ o           __</span><span class="pun">/</span></li><li class="L2"><span class="pln">             &#92;    &#92;         __</span><span class="pun">/</span></li><li class="L3"><span class="pln">              &#92;____&#92;_______</span><span class="pun">/</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">docker </span><span class="kwd">is</span><span class="pln"> configured to </span><span class="kwd">use</span><span class="pln"> the </span><span class="kwd">default</span><span class="pln"> machine </span><span class="kwd">with</span><span class="pln"> IP </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">99.100</span></li><li class="L7"><span class="typ">For</span><span class="pln"> help getting started</span><span class="pun">,</span><span class="pln"> check </span><span class="kwd">out</span><span class="pln"> the docs at https</span><span class="pun">:</span><span class="com">//docs.docker.com</span></li></ol></pre></div><p>执行成功后，Docker toolbox 会建立一个名叫 default 的 Linux 系统，而上面已经装好了 docker 的软体，接下来我就简称他为 Docker Host，另外系统讯息告诉我们说，Docker container 的 ip 是 192.168.99.100 , 它沟通的 port 预设是 2376 ，所以我可以用  "telnet 192.168.99.100 2376" 这个指令测试一下， Docker Container 是否正常运作，看到下面这个讯息就代表 docker 已经成功建立起来罗。</p><div class="codeBlock term"><span class="title"> telnet docker</span><pre class="prettyprint lang-term linenums" ><ol class="linenums"><li class="L0"><span class="pln">telnet </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">99.100</span><span class="pln"> </span><span class="lit">2376</span></li><li class="L1"><span class="typ">Trying</span><span class="pln"> </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">99.100</span><span class="pun">...</span></li><li class="L2"><span class="typ">Connected</span><span class="pln"> to </span><span class="lit">192.168</span><span class="pun">.</span><span class="lit">99.100</span><span class="pun">.</span></li><li class="L3"><span class="typ">Escape</span><span class="pln"> character </span><span class="kwd">is</span><span class="pln"> </span><span class="str">&#39;^]&#39;</span><span class="pun">.</span></li><li class="L4"><span class="pun">]</span></li></ol></pre></div><p>检查 Docker OS</p><p>如果你不知道 Docker Host 的 IP 与 port ，那么你可以用 <b>docker-machine ls </b>，这个指令来检查，又或者你可以在 Mac 里打开 Virtual Box 。</p><div class="codeBlock term"><span class="title"> docker-machine ls</span><pre class="prettyprint lang-term linenums" ><ol class="linenums"><li class="L0"><span class="pln">NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER    ERRORS</span></li><li class="L1"><span class="kwd">default</span><span class="pln">   </span><span class="pun">-</span><span class="pln">        virtualbox   </span><span class="typ">Running</span><span class="pln">   tcp</span><span class="pun">:</span><span class="com">//192.168.99.100:2376           v1.11.2</span></li></ol></pre></div><p>这个指令 "<b>docker-machine env</b>" 也可以取得 Docker 相关的讯息。</p><div class="codeBlock term"><span class="title"> docker-machine env</span><pre class="prettyprint lang-term linenums" ><ol class="linenums"><li class="L0"><span class="pln">docker</span><span class="pun">-</span><span class="pln">machine env</span></li><li class="L1"><span class="kwd">export</span><span class="pln"> DOCKER_TLS_VERIFY</span><span class="pun">=</span><span class="str">"1"</span></li><li class="L2"><span class="kwd">export</span><span class="pln"> DOCKER_HOST</span><span class="pun">=</span><span class="str">"tcp://192.168.99.100:2376"</span></li><li class="L3"><span class="kwd">export</span><span class="pln"> DOCKER_CERT_PATH</span><span class="pun">=</span><span class="str">"/Users/www/.docker/machine/machines/default"</span></li><li class="L4"><span class="kwd">export</span><span class="pln"> DOCKER_MACHINE_NAME</span><span class="pun">=</span><span class="str">"default"</span></li><li class="L5"><span class="com"># Run this command to configure your shell: </span></li><li class="L6"><span class="com"># eval $(docker-machine env)</span></li></ol></pre></div><h2>建立一个 ubuntu container</h2><p>你可以输入 <code>$ docker run -t -i ubuntu:12.04 /bin/bash</code> 来建立一个 container ，但是你会收到这个讯息 "docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?". 原因是 docker 不知道 default docker OS 的系统是装在那一台 virtual machine ，IP 是什么 ，你必须先把环境变数设定正确，可以用指令 "docket-machine env default " 来检查 default docker 的设定，再把下面这个指令将环境变数写入。</p><ul class="list">  <li>eval "$(docker-machine env default)"</li></ul><ul class="list">  <li>docker run -t -i ubuntu:12.04 /bin/bash</li></ul><div class="codeBlock term"><span class="title"> docker run</span><pre class="prettyprint lang-term linenums" ><ol class="linenums"><li class="L0"><span class="pln">docker run </span><span class="pun">-</span><span class="pln">t </span><span class="pun">-</span><span class="pln">i ubuntu</span><span class="pun">:</span><span class="lit">12.04</span><span class="pln"> </span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">bash</span></li><li class="L1"><span class="typ">Unable</span><span class="pln"> to find image </span><span class="str">&#39;ubuntu:12.04&#39;</span><span class="pln"> locally</span></li><li class="L2"><span class="lit">12.04</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Pulling</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> library</span><span class="pun">/</span><span class="pln">ubuntu</span></li><li class="L3"><span class="pln">cc99613160bd</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Pull</span><span class="pln"> complete </span></li><li class="L4"><span class="lit">7b4fddeacb94</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Pull</span><span class="pln"> complete </span></li><li class="L5"><span class="lit">25455fa86fcc</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Pull</span><span class="pln"> complete </span></li><li class="L6"><span class="lit">087ee67bc4a3</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Pull</span><span class="pln"> complete </span></li><li class="L7"><span class="typ">Digest</span><span class="pun">:</span><span class="pln"> sha256</span><span class="pun">:</span><span class="pln">ab81ef94fcfbec335c8a528f90f3dbb627830556f55c31cd720198534b44370f</span></li><li class="L8"><span class="typ">Status</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Downloaded</span><span class="pln"> newer image </span><span class="kwd">for</span><span class="pln"> ubuntu</span><span class="pun">:</span><span class="lit">12.04</span></li><li class="L9"><span class="pln">root@bb230bd64efa</span><span class="pun">:/#</span></li></ol></pre></div><p>启动  container 成功后，你会看到上面这个讯息，而且系统已经帮你登入新建好的 ubuntu ，你可以使用任何 ubuntu 上的相关指令。</p><h3>container 相关指令</h3><ul class="list">  <li>docker run -d -P --name web nginx : 建立一个装好 nginx service ，名为 web 的 Linux Machine。</li>  <li>docker run -d -P -v /www/site:/usr/share/nginx/html --name mysite nginx</li>  <li>docker port mysite</li>  <li>docker cp xxx.file  20e8aa9f9a53:/   : 传送一个档案到 container 。</li></ul><h2>手动建立 Docker OS</h2><p>如果你在使用 Docker  过程中，有碰到太奇怪，无法解决的问题，那么你可以选择手动移除 Docker  Host (预设叫 default )，再重新建立一个新的 Docker Host。</p><p>首先我们要停用 default 这个预设 Docker toolbox 帮我们建好的 Docker Host 。</p><ul class="list">  <li>docker-machine stop default</li></ul><p>再来移除他，请注意这个动作会移除 Docker 的所有资料，请先确定你的重要资料都已备份。</p><ul class="list">  <li>docker-machine rm  default</li></ul> <br /><p>最后下这个指令，就可以重新建立一个新的 Docker Host 罗 ， docker 预设只有 20GB 硬碟容量，建议加大到 40 GB 以上。</p><p>docker-machine create --driver virtualbox --virtualbox-disk-size "40000" default</p><h2>volume - mount</h2><p>如果你想要在 docker container 挂载根目录的资料夹，例如 /my_dev ，我使用 -v /my_dev:/my_dev 这个方式是无效的，原因是 Docker 在 Mac 中是一个 VitualBox Machine ，这个 machine 本身没有 /my_dev 目录，简单的做法是先手动将 Mac 的 /my_dev mount 到 virtual machine 中。</p><p>VirtualBox Machine 必需先安装 GuestAdditions ，先用 VirtualBox UI 介面，挂载 VBoxGuestAdditions.iso ，在选单中的 <span class="flow-item">Device</span><span class="glyphicon glyphicon-chevron-right"></span><span class="flow-item">Insert</span> Guest Addition CD Image，挂载好再执行下面的指令，挂载的时候要特别注意，第一颗 CD Rom 一定要是 boot2docker.iso 不然 VirtualBox 会打不开，我的解法是先用第一颗 CD Rom 开机，开机成功后，再强迫移除 CD Rom iso ，重新点击一次 "Insert Guest Addition CD Image" ，这时就可以安装 Guest Addition ，安装成功后再把 boot2docker.iso 重新挂载到第一颗 CD Rom。</p><ul class="list">  <li>docker-machine ssh : 登入 virtual machine</li>  <li>mkdir d</li>  <li>sudo mount /dev/sr1 d</li>  <li>cd d</li>  <li>sudo sh ./VBoxLinuxAdditions.run  : 装完就可以退出了。</li></ul><p>再来执行  mount 执令</p><ul class="list">  <li>docker-machine stop : 先停掉 virtual machine</li>  <li>VBoxManage sharedfolder add default --name my_dev --hostpath /my_dev --automount</li>  <li>docker-machine start</li></ul><p>移除方式</p><ul class="list">  <li>docker-machine stop</li>  <li>VBoxManage sharedfolder remove default --name /my_dev</li></ul><h3>Docker 指令</h3>    <br /><table class="table"><tr><th>指令</th><th>说明</th></tr><tr><td>docker ps</td><td>显示所有 containers</td></tr><tr><td>docker images</td><td>显示所有的 images</td></tr><tr><td>docker rmi -f db7e8a0d84e3</td><td>移除一个 image</td></tr><tr><td>docker pause bb230bd64efa</td><td>停止 container 中的所有 processes</td></tr><tr><td>docker unpause bb230bd64efa</td><td>取消停止 container 中的所有 processes</td></tr><tr><td>docker logs bb230bd64efa</td><td>查看 container 的 log</td></tr><tr><td>docker stop bb230bd64efa</td><td>停止 container 运作</td></tr><tr><td>docker start bb230bd64efa</td><td>启用 container</td></tr><tr><td>docker commit bb230bd64efa ubuntu:12.04</td><td>commit container 中的修改， bb230bd64efa 是 container id， ubuntu:12.04 是 image 名称</td></tr><tr><td>docker run -t -i ubuntu:12.04 /bin/bash</td><td>启动 container  ，并登入</td></tr></table><h2>参考文章</h2><ul class="list">  <li><a href="https://docs.docker.com/"  target="_blank">https://docs.docker.com/</a></li>  <li><a href="http://www.scriptrock.com/articles/docker-vs-lxc"  target="_blank">http://www.scriptrock.com/articles/docker-vs-lxc</a></li>  <li><a href="https://github.com/docker/docker"  target="_blank">https://github.com/docker/docker</a></li></ul></div>
    </div>
    <div class="entry-footer">
        <p class="article-modify-author">This post was last modified by
            <span>puritys</span>
            <time datetime="2018-03-10T15:18:07+08:00" class="article-modify-time">2018/03/10</time>
        </p>

        
    <ul class="share-btn-wrap">
        <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.puritys.me/docs-blog/article-309" class="shareBtn" title="share" rel="nofollow"></a></li>
        <li>
            <iframe src="https://www.facebook.com/plugins/like.php?href=https://www.puritys.me/docs-blog/article-309" scrolling="no" frameborder="0"
                style="border:none; width:450px; height:80px"></iframe>
        </li>
    </ul>



        
        
        <div class="next-article-box">
            <div class="prev-article">
                &nbsp;
            </div>
            <div class="next-article">
                
                <a href="../../docs-blog/article-362.html">如何用 Dockerfile 自製一個 Docker image / Container</a>
                &nbsp;
            </div>
        </div>
        
        
    </div>
    
    
        <br />
        <ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-1449650742587459"
     data-ad-slot="2197220184"></ins>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-1449650742587459",
          enable_page_level_ads: true
     });
</script>
    

</div>

        
            
    </div>
    

            
    <div class="sidebar">
        
                

<div class="list-group">                                                                                                                            
    <h4 class="list-group-heading">Docker 相關</h4>
    <ul>
    
        <li><a href="../../docs-blog/article-457.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_457&quot;}'>Docker toolbox 取代方案 - 支援 VPN </a></li>
    
        <li><a href="../../docs-blog/article-447.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_447&quot;}'>How to link ssh-agent into docker container </a></li>
    
        <li><a href="../../docs-blog/article-432.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_432&quot;}'>Docker Machine -  kernel panic: unable to mount root fs on unknown-block </a></li>
    
        <li><a href="../../docs-blog/article-403.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_403&quot;}'>使用 Docker 執行 Maven - mvn compile </a></li>
    
        <li><a href="../../docs-blog/article-393.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_393&quot;}'>用 Docker 取代 VirtualBox - 建立  Linux 環境 </a></li>
    
        <li><a href="../../docs-blog/article-363.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_363&quot;}'>Docker vs Virtual Machine </a></li>
    
        <li><a href="../../docs-blog/article-362.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_362&quot;}'>如何用 Dockerfile 自製一個 Docker image / Container </a></li>
    
    </ul>
</div>

<div class="list-group">                                                                                                                            
    <h4 class="list-group-heading">Mac 相關</h4>
    <ul>
    
        <li><a href="../../docs-blog/article-425.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_425&quot;}'>MacBook Sierra 使用  Chrome 瀏覽器慢慢卡卡的，游標消失 </a></li>
    
        <li><a href="../../docs-blog/article-168.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_168&quot;}'>如何在 Win , Mac , Chrome 設定實用的 .screenrc </a></li>
    
        <li><a href="../../docs-blog/article-167.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_167&quot;}'>第一次使用 MacBook </a></li>
    
    </ul>
</div>

<div class="list-group">                                                                                                                            
    <h4 class="list-group-heading">類別 實用軟體</h4>
    <ul>
    
        <li><a href="../../docs-blog/article-455.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_455&quot;}'>Gboard 好用的 Android 輸入法 </a></li>
    
        <li><a href="../../docs-blog/article-450.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_450&quot;}'>Mac + Chrome 解決健保卡讀不到的問題 </a></li>
    
        <li><a href="../../docs-blog/article-435.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_435&quot;}'>下載舊版 Google Chrome (保證無毒) </a></li>
    
        <li><a href="../../docs-blog/article-397.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_397&quot;}'>Windows 硬碟免費備份： EaseUS Todo Backup </a></li>
    
        <li><a href="../../docs-blog/article-396.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_396&quot;}'>Sublime 前端工程師必裝外掛 : Browser Refresh </a></li>
    
        <li><a href="../../docs-blog/article-395.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_395&quot;}'>別再找破解版了，免費下載  Win 10 / Windows 10 </a></li>
    
        <li><a href="../../docs-blog/article-326.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_326&quot;}'>FFMPEG : 免費影音轉檔工具 </a></li>
    
        <li><a href="../../docs-blog/article-309.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_309&quot;}'>在 Mac 中使用 Docker </a></li>
    
        <li><a href="../../docs-blog/article-303.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_303&quot;}'>我為什麼愛用 VIM 編輯器來寫程式 </a></li>
    
        <li><a href="../../docs-blog/article-291.html" data-ga='{&quot;action&quot;:&quot;list_click&quot;,&quot;label&quot;:&quot;id_291&quot;}'>USB，硬碟救援，檔案刪除還原 </a></li>
    
    </ul>
</div>


        
                


        
            
    </div>
    
        
</div>



    

            
<div class="bottom-footer">
    <ul class="nav">
        
        <li >
            <a href="https://www.puritys.me/news">網路新聞</a>
        </li>
        
        <li >
            <a href="https://www.puritys.me/life">生活旅遊</a>
        </li>
        
        <li >
            <a href="https://www.puritys.me/WEB_SECURITY">網路安全</a>
        </li>
        
        <li class="active">
            <a href="https://www.puritys.me/docs-cate">程式雜記</a>
        </li>
        

        <li>
            <a href="https://www.puritys.me/">puritys.me</a>
        </li>
        <li>
            <a href="http://www.lingihuang.com/">VIVIAN CRAP</a>
        </li>
        
    </ul>
    <p>Copyright &amp;copy; 2014 PURITYS.COM. All rights reserved.</p>
</div>


            
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?64c3d3fbf3cb7871eb5a607fa05c4375";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
            </script><script src="https://connect.facebook.net/en_US/all.js"></script>


        
</body>
    <script src="https://www.puritys.me/templates/static/js/files?sidebar.js&amp;ezHTML_main.js&amp;?v=20180416-2"></script>
</html>